{"version":3,"file":"DynamicIcon.js","sources":["../../src/DynamicIcon.ts"],"sourcesContent":["'use client';\r\n\r\nimport { createElement, forwardRef, useEffect, useState } from 'react';\r\nimport { IconNode, LucideIcon, LucideProps } from './types';\r\nimport dynamicIconImports from './dynamicIconImports';\r\nimport Icon from './Icon';\r\n\r\nexport type DynamicIconModule = { default: LucideIcon; __iconNode: IconNode };\r\n\r\nexport type IconName = keyof typeof dynamicIconImports;\r\n\r\nexport const iconNames = Object.keys(dynamicIconImports) as Array<IconName>;\r\n\r\ninterface DynamicIconComponentProps extends LucideProps {\r\n  name: IconName;\r\n  fallback?: () => JSX.Element | null;\r\n}\r\n\r\nasync function getIconNode(name: IconName) {\r\n  if (!(name in dynamicIconImports)) {\r\n    throw new Error('[lucide-react]: Name in Lucide DynamicIcon not found');\r\n  }\r\n\r\n  // TODO: Replace this with a generic iconNode package.\r\n  const icon = (await dynamicIconImports[name]()) as DynamicIconModule;\r\n\r\n  return icon.__iconNode;\r\n}\r\n\r\n/**\r\n * Dynamic Lucide icon component\r\n *\r\n * @component Icon\r\n * @param {object} props\r\n * @param {string} props.color - The color of the icon\r\n * @param {number} props.size - The size of the icon\r\n * @param {number} props.strokeWidth - The stroke width of the icon\r\n * @param {boolean} props.absoluteStrokeWidth - Whether to use absolute stroke width\r\n * @param {string} props.className - The class name of the icon\r\n * @param {IconNode} props.children - The children of the icon\r\n * @param {IconNode} props.iconNode - The icon node of the icon\r\n *\r\n * @returns {ForwardRefExoticComponent} LucideIcon\r\n */\r\nconst DynamicIcon = forwardRef<SVGSVGElement, DynamicIconComponentProps>(\r\n  ({ name, fallback: Fallback, ...props }, ref) => {\r\n    const [iconNode, setIconNode] = useState<IconNode>();\r\n\r\n    useEffect(() => {\r\n      getIconNode(name)\r\n        .then(setIconNode)\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    }, [name]);\r\n\r\n    if (iconNode == null) {\r\n      if (Fallback == null) {\r\n        return null;\r\n      }\r\n\r\n      return createElement(Fallback);\r\n    }\r\n\r\n    return createElement(Icon, {\r\n      ref,\r\n      ...props,\r\n      iconNode,\r\n    });\r\n  },\r\n);\r\n\r\nexport default DynamicIcon;\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAWO;AAOP;AACE;AACE;AAAsE;AAIxE;AAEA;AACF;AAiBA;AAAoB;AAEhB;AAEA;AACE;AAGI;AAAmB;AACpB;AAGL;AACE;AACE;AAAO;AAGT;AAA6B;AAG/B;AAA2B;AACzB;AACG;AACH;AACD;AAEL;;"}